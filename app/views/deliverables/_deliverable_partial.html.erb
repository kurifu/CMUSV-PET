<tr>
  <th>Deliverable</th>
  <th>Upload deliverable</th>
  <th>Action</th>
</tr>

<% for @deliverable in @deliverables_of_phase %>
<tr>
  <td>
    <%= @deliverable.name %>
  </td>
  <td>

    <% if @deliverable.attachment? then %>
      <%= link_to '#{@deliverable.attachment.url}', @deliverable.attachment.url %>
    
    <% else %>
      <% form_remote_for @deliverable, :url => {:action => :update, :id => @deliverable.id, :phase => @deliverable.phase}, :html => { :multipart => true } do |f|%>
        <%= f.file_field :attachment %>
        <%= f.text_field :attachment_file_name %>
        <%= f.submit 'Submit' %>
      <% end %>
    <% end %>

  </td>
  <td>
    <a href="#">Modify</a>
    <a href="#">Delete</a>
  </td>
</tr>
<% end %>
<tr>
  <td>&nbsp;</td>
</tr>
<tr>
  <td>&nbsp;</td>
</tr>
<tr>
  <td colspan="3">
    <div id="add_deliverable">

      <%= link_to "Add deliverable type", :action=>'validate_before_adding_new_type' %>
    </div>
  </td>
</tr>